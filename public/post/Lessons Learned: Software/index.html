<!DOCTYPE html>
<html>

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">

    <link rel="stylesheet" href="http://jad-b.github.io/css/stark.css">
    <link rel="stylesheet" href="http://jad-b.github.io/css/prism.css">
    <link rel="stylesheet" href="http://jad-b.github.io/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Sorts+Mill+Goudy|Lato:100,300,400,600">

    
    
    <title>Lessons Learned: Software - while true: continue</title>
    <meta content=" - The education of a curious man." property="og:description">
    <meta content="Lessons Learned: Software - while true: continue" property="og:title">
    
      
      <meta content="programming" name="keywords">
      
    
    

  </head>

  <body>

    <header class="hero grid">
      <a class="logo" href="#">
        <p>while true:</p><p class="logo-continue">continue</p>
      </a>
    </header>

      
      <main class="site-content grid">


<article>

  <div class="grid content-title">

  
  <h1 class="cell">
    <a href="http://jad-b.github.io/post/Lessons%20Learned:%20Software/"> Lessons Learned: Software </a>
  </h1>

  

  
  <p class="cell content-timestamp">Last updated on Thu, Jul 28, 2016</p>

</div>



<p class="content-keywords">programming</p>



  

  <ul>
<li><p><strong>Use TLS from the beginning.</strong>
There aren&rsquo;t many reasons you shouldn&rsquo;t. Snakeoil gets you in the practice of
managing the keys, but a self-signed or corporate wildcard cert that&rsquo;s scoped
to your development domain are even better. I&rsquo;m finally seeing a plethora of
key management tools<sup class="footnote-ref" id="fnref:fe4463e88dd1ddad3485337b6892122f:kmt"><a rel="footnote" href="#fn:fe4463e88dd1ddad3485337b6892122f:kmt">1</a></sup> begin to propagate, so no excuses.</p></li>

<li><p><strong>Write functional tests to run against any envinromnet.</strong>
This means they need to accept configuration options, and should only
affect test data they&rsquo;re responsible for creating and deleting. Now your
integration tests can smoke-test production.
If you can scope which tests run, which I know Python&rsquo;s <code>nose</code> and <code>pytest</code>
and Golang&rsquo;s <code>go test -tags=smoke</code> can do, you can limit your tests to fit
your requirements of run time, data safety, and validation.</p></li>

<li><p><strong>Incremental modifications over re-writes.</strong>
You have code running, and now you need to change it. It&rsquo;s conceptually
easiest to pretend like that code doesn&rsquo;t exist, and write from scratch.
But only in concept. Re-writes ignore the ecosystem that code runs within -
the system&rsquo;s that depend on it, the operational considerations you&rsquo;ve learned to
account for, and the realities of the world you&rsquo;ve had to code around.
Re-writes have a place. But they&rsquo;re usually the harder choice, long-term.</p>

<p>Here&rsquo;s some ideas I&rsquo;ve already had to use:</p>

<ul>
<li><p>Don&rsquo;t forget about search &amp; replace. Rename old objects to
&ldquo;OldStructure&rdquo;, or &ldquo;StructureV1&rdquo; while the deprecation is underway.
People seem to get nervous about this, but if you missed something, a
static language won&rsquo;t compile, and a dynamically-typed language will have
its tests fail. If both of those fail to catch the error, is it really a
problem with the replacement, or with your safety nets?</p></li>

<li><p>REST API: Isolate the old and new logic into different functions. Deploy
new changes to a &ldquo;dark&rdquo; endoint under a different path. Toggle between
old &amp; new using a query parameter, or swap them at runtime using a flag.</p></li>

<li><p>Database: Adding new columns is easy. Modifying existing requires
staggered deploys between the DB and its clients (probably your
downstream API(s)). Sorry.  At some point, you will be faced with the
choice of doing a total re-write, followed by a nerve-wracking deploy,
replete with cross-team coordination, or biting off that complexity in
small changes and frequent deployments. Small changes let you deploy
faster. Deploying faster =&gt; Your work affects people faster. Mattering in
other people&rsquo;s lives =&gt; putting off existential meaningless for one more
day. Search &ldquo;zero-downtime DB migration&rdquo; for plenty of resources. I&rsquo;m
partial to the outline in Chapter 12 of &ldquo;Continuous Delivery&rdquo; by Jez
Humble, titled &ldquo;Managing Data&rdquo;.</p></li>
</ul></li>

<li><p><strong>Write backwards from your user interfaces</strong>.
Writing a web app? Start with the UI. You&rsquo;re writing the REST API the UI calls?
Start with the API description. <a href="https://github.com/OAI/OpenAPI-Specification">OpenAPI is a thing now</a>, and I&rsquo;m not going
back. It&rsquo;s a CLI tool? Write the options w/ flags, for what you know you
need.</p>

<p>Only write for what someone needs right now. What someone wants but not needs
should live in a design conversation elsewhere, such as a GitHub issue, a
text document, or a JIRA ticket.</p>

<p>I believe this to be a (correct) generalization of &ldquo;API-first&rdquo; design and/or
contract-driven design.</p>

<p>One possible argument: This delays potentially deal-breaking backend
considerations that are far-removed from the end-user experience.</p>

<p>I think two things are imporant to keep in mind. First, your problem has
likely been solved before, many times over. This is the case for most
full-stack work. Thus, the amount of &ldquo;unknowns&rdquo; lurking out there
are few, and always getting smaller. Second, all this really means is you
have a conversation with your clients (The web UI team) exactly when you were
actually building the tool they wanted. If anyone has examples of a tool
simply can&rsquo;t be made human-friendlier, I&rsquo;d be interested to know.</p></li>
</ul>
<div class="footnotes">

<hr />

<ol>
<li id="fn:fe4463e88dd1ddad3485337b6892122f:kmt"><p>Such as these:
<a href="https://aws.amazon.com/kms/">Amazon KMS</a>,
<a href="https://www.vaultproject.io/docs/secrets/pki/index.html">Hashicorp&rsquo;s Vault&rsquo;s PKI Backend</a>,
<a href="https://github.com/square/certstrap">Square&rsquo;s certstrap</a></p>
 <a class="footnote-return" href="#fnref:fe4463e88dd1ddad3485337b6892122f:kmt"><sup>[return]</sup></a></li>
</ol>
</div>


</article>

<div id="disqus_thread"></div>
<script>
   var disqus_config = function () {
     this.page.url = "http:\/\/jad-b.github.io\/post\/Lessons%20Learned:%20Software\/";
     
   };

  
  (function() {
    
    
    if (window.location.hostname == "localhost")
        return;

    var d = document, s = d.createElement('script');

    s.src = "//while-true-continue.disqus.com/embed.js";

    s.setAttribute('data-timestamp', + new Date());
    (d.head || d.body).appendChild(s);
  })();
</script>

<noscript>Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript" rel="nofollow">
    comments powered by Disqus.
  </a>
</noscript>


  </main>

    <footer>

      <span class="copyright">
        <i class="fa fa-copyright"></i>
        <a href="j.american.db@gmail.com">j.american.db@gmail.com</a>
      </span>


      <span class="profile-links">

        
        <a href="https://github.com/jad-b">
          <img alt="jad-b @ GitHub"
               src="http://jad-b.github.io/img/octocat.svg"
               width="32"
               height="32">
        </a>

        
        <a href="https://www.goodreads.com/user/show/43556621-jeremy-dobbins-bucklad">
          <img alt="Goodreads"
               src="https://www.goodreads.com/assets/layout/header/nav_g_icon.svg"
               width="32"
               height="32">
        </a>

        
        <iframe allowtransparency="true" scrolling="no" frameborder="no"
          src="https://w.soundcloud.com/icon/?url=http%3A%2F%2Fsoundcloud.com%2Fjeremy-dobbins-bucklad&color=orange_white&size=32"
          style="width: 32px; height: 32px;"></iframe>

        
        <a href="http://8tracks.com/herbert-finkleton">
          <img alt="8Tracks"
               src="http://images.8tracks.com/avatar/i/006/193/171/52608.original-3203.jpg?rect=0,0,500,500&q=98&fm=jpg&fit=max&w=56&h=56"
               width="32"
               height="32">
        </a>
      </span> 

    </footer>

  
<script src="http://jad-b.github.iojs/prism.js" async></script>

<script type="text/javascript" src="http://jad-b.github.iojs/MathJax.js" async></script>
<script type="text/x-mathjax-config" defer>


MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>

<script type="text/x-mathjax-config" defer>
  
  
  
  MathJax.Hub.Queue(function() {
    
    
    
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>


<script id="dsq-count-scr" src="//while-true-continue.disqus.com/count.js" async></script>

  </body>

</html>

